# Last Pic - 마지막 프레임 캡처 ver 1.2 (3가지 모드 지원)

동영상을 업로드하여 **시작 프레임**, **마지막 프레임**, 또는 **원하는 구간의 프레임**을 이미지로 캡처하고 다운로드할 수 있는 웹 애플리케이션입니다. 모든 처리는 클라이언트 브라우저에서 실행되어 서버로 파일이 전송되지 않습니다.

## 🎯 앱 이름: **Last Pic**
짧고 기억하기 쉬운 이름으로, "마지막 프레임 캡처 도구"를 의미합니다.

## ✨ 주요 기능

### 현재 완료된 기능
- ✅ **3가지 캡처 모드**:
  - 🎬 **시작 프레임 캡처**: 영상의 첫 번째 프레임 추출
  - 🎬 **마지막 프레임 캡처**: 영상의 마지막 프레임 추출  
  - 🎯 **원하는 구간 캡처**: 시간 슬라이더로 원하는 지점 선택하여 캡처
- ✅ **동영상 업로드**: 브라우저에서 지원하는 모든 동영상 형식 (MP4, WebM 등)
- ✅ **깔끔한 동영상 미리보기**: 기본 컨트롤 없는 깔끔한 영상 표시, 파일 업로드 시 바로 확인 가능
- ✅ **시간 슬라이더 실시간 동기화**: 드래그하면 비디오가 즉시 해당 시점으로 이동
- ✅ **미리보기 재생**: 원하는 구간 모드에서 비디오 미리보기 가능
- ✅ **영상 원본 비율 유지**: Full HD 범위 내 최적 해상도로 추출
- ✅ **실시간 미리보기**: 캡처된 이미지를 캔버스에서 즉시 확인
- ✅ **이미지 다운로드**: PNG 형식으로 고품질 이미지 저장
- ✅ **반응형 디자인**: 모든 디바이스에서 최적화된 사용자 경험
- ✅ **다크 테마**: 눈에 편안한 어두운 UI 테마
- ✅ **에러 처리**: 지원되지 않는 형식 및 오류 상황 적절히 안내
- ✅ **Freemium 수익화 모델**: 무료/프리미엄 티어로 지속 가능한 비즈니스 모델

## 💎 Freemium 모델 (수익화 전략)

### 무료 버전 (Free Tier)
- 📸 **일일 캡처 제한**: 하루 3회까지 무료 사용
- 🎬 **마지막 프레임만**: 마지막 프레임 캡처 모드만 이용 가능
- 📺 **720p 해상도**: 최대 1280×720 해상도로 제한
- 💧 **워터마크**: 우측 하단에 작은 워터마크 표시 ("프레임캡처 무료버전")

### 프리미엄 버전 ($10.00/년 연간 구독)
- ✨ **무제한 캡처**: 일일 제한 없이 마음껏 사용
- 🎯 **3가지 모드 모두**: 시작/마지막/원하는 구간 모든 모드 사용 가능
- 📺 **3가지 해상도 선택**: 원본 유지 / Full HD (1080p) / 원본 최대 (4K+)
- 🚫 **광고 완전 제거**: 방해 요소 없는 깔끔한 경험
- ✨ **워터마크 제거**: 깨끗한 이미지 저장
- 🚀 **배치 처리**: 여러 영상을 한 번에 처리 (추후 제공)
- 🛠️ **우선 지원**: 빠른 기술 지원 및 업데이트
- 💰 **합리적 가격**: 월 $0.83 (커피 1잔보다 저렴)

### 👑 프리미엄 구독 흐름
1. **잠긴 기능 클릭**: 시작 프레임 또는 원하는 구간 모드 클릭
2. **업그레이드 모달**: 프리미엄 기능 소개 및 가격 표시 ($10.00/년 / ₩13,000/년)
3. **구독 결제**: 앱스토어 자동 갱신 구독 (Auto-renewable Subscription)
4. **즉시 활성화**: 결제 완료 후 바로 모든 기능 사용 가능
5. **자동 갱신**: 1년 후 자동 갱신 (언제든 해지 가능)

### 🎨 프리미엄 UI 요소
- 👑 프리미엄 배지 (헤더 상단)
- 📊 사용 횟수 실시간 표시 (무료 사용자: "오늘 남은 캡처: 2/3")
- 🔒 잠긴 모드 버튼에 자물쇠 아이콘 표시
- ✨ 업그레이드 모달 (프리미엄 기능 소개, 가격, 구매 버튼)
- 🎉 구매 완료 토스트 메시지

## 🌐 웹사이트 URL (플레이스토어 등록용)

### Play Console 등록 정보
프로젝트를 GitHub Pages 또는 Netlify에 배포 후 아래 URL을 사용:

```
웹사이트: https://당신의아이디.github.io/last-pic/
개인정보처리방침: https://당신의아이디.github.io/last-pic/privacy-policy.html
```

### 빠른 배포 방법
1. **GitHub Pages** (5분): `웹사이트URL_빠른준비.md` 참고
2. **Netlify** (30초): 프로젝트 폴더를 드래그 앤 드롭
3. 상세 가이드: `플레이스토어용_웹사이트_준비가이드.md` 참고

---

## 📱 앱 스토어 출시 가이드

### ✅ Google Play Developer 등록 완료!

**다음 단계: 앱 출시 (3-7일)**

#### 🚀 빠른 시작 가이드

1. **웹사이트 배포** (5분)
   - `웹사이트URL_빠른준비.md` 참고
   - Netlify 또는 GitHub Pages

2. **Android 앱 빌드** (2-3시간)
   - `Android_앱_빌드_가이드.md` 참고
   - Capacitor + Android Studio

3. **Play Console 등록** (1-2시간)
   - `구글플레이_출시_다음단계.md` 참고
   - 스토어 정보 + AAB 업로드

4. **출시!** (1-3일 심사)
   - `구글플레이_출시_체크리스트.md` 참고

#### 📚 상세 가이드 문서

| 가이드 | 내용 | 소요 시간 |
|--------|------|----------|
| **`구글플레이_출시_체크리스트.md`** | 전체 체크리스트 (필수!) | - |
| **`구글플레이_출시_다음단계.md`** | 단계별 상세 가이드 | - |
| **`Android_앱_빌드_가이드.md`** | Capacitor AAB 빌드 | 2-3시간 |
| **`앱스토어_등록정보_가이드.md`** | 설명/스크린샷 작성 | 1-2시간 |
| **`웹사이트URL_빠른준비.md`** | 웹사이트 배포 | 5분 |
| **`플레이스토어용_웹사이트_준비가이드.md`** | 웹사이트 상세 가이드 | - |
| **`앱스토어출시완벽가이드.md`** | Google & Apple 출시 | - |
| **`개인vs사업자등록가이드.md`** | 계정 유형 선택 | - |
| **`앱스토어출시_구독시스템가이드.md`** | 구독 구현 | - |

#### 💡 추천 진행 순서

```
Day 1: 웹사이트 배포 (5분) + AAB 빌드 (2-3시간)
       ↓
Day 2: Play Console 등록 (2-3시간) + 심사 제출
       ↓
Day 3-5: 심사 대기
       ↓
🎉 출시!
```

---

## 🚀 사용 방법

### 기본 사용법
1. **동영상 선택**: "동영상 선택" 버튼을 클릭하여 로컬 동영상 파일을 선택합니다.
2. **동영상 미리보기**: 파일 업로드 후 영상이 바로 표시되어 내용을 미리 확인할 수 있습니다.
3. **캡처 모드 선택**: 3가지 모드 중 원하는 방식을 선택합니다 (기본: 마지막 프레임):
   - ⏮️ **시작 프레임**: 영상의 첫 번째 프레임
   - ⏭️ **마지막 프레임**: 영상의 마지막 프레임 (기본 선택)
   - 🎯 **원하는 구간**: 시간 슬라이더로 정확한 시점 선택
4. **시점 선택 (원하는 구간 모드)**: 
   - "원하는 구간" 버튼을 클릭하면 비디오 미리보기 섹션과 시간 컨트롤이 자동으로 표시됩니다
   - 동영상이 없는 경우 업로드 안내가, 있는 경우 실제 영상이 표시됩니다
   - 미리보기 화면 바로 아래에서 시간 슬라이더를 드래그하여 정확한 시점을 선택합니다
   - 슬라이더와 미리보기 재생 버튼이 영상과 함께 통합된 인터페이스로 제공됩니다
5. **미리보기 재생** (선택사항): 원하는 구간 모드에서 영상 하단의 "미리보기 재생" 버튼으로 영상을 확인할 수 있습니다.
6. **프레임 캡처**: 선택한 모드에 따른 캡처 버튼을 클릭합니다.
7. **미리보기 확인**: 우측 패널에서 캡처된 이미지를 확인합니다.
8. **이미지 다운로드**: "이미지 다운로드" 버튼을 클릭하여 PNG 파일로 저장합니다.

### 🎯 원하는 구간 캡처 상세 사용법  
- **📽️ 깔끔한 비디오 인터페이스**: 
  - "원하는 구간" 모드 선택 시 비디오 미리보기 섹션이 자동으로 표시됩니다
  - 동영상 파일이 없는 경우 "먼저 동영상 파일을 업로드하세요" 안내 메시지가 표시됩니다
  - 파일 업로드 후 영상이 바로 표시되고, 모드에 따라 적절한 시점으로 자동 이동합니다
  - 비디오는 기본 컨트롤 없이 깔끔하게 표시되고, 모든 조작은 하단의 통합 컨트롤로만 가능합니다
  - 시간 슬라이더와 재생 컨트롤이 영상 바로 아래에 통합되어 직관적이고 일관된 조작 경험을 제공합니다
- **🎛️ 시간 슬라이더 실시간 동기화**: 
  - 영상 하단의 슬라이더를 드래그하면 즉시 현재 시간이 표시되고 영상도 해당 구간으로 실시간 이동합니다  
  - 100ms 디바운싱으로 부드러운 탐색 경험을 제공합니다
  - 슬라이더와 비디오가 양방향으로 완벽히 동기화됩니다
- **🔄 모드별 자동 시점 이동**: 
  - 시작 프레임 모드: 0.1초 지점으로 이동
  - 마지막 프레임 모드: 마지막에서 0.5초 전 지점으로 이동
  - 원하는 구간 모드: 사용자가 영상을 보면서 자유롭게 선택
- **▶️ 통합 미리보기 컨트롤**: 
  - 비디오 화면에는 기본 플레이어 컨트롤이 없어 깔끔하고 집중도가 높습니다
  - 모든 재생/일시정지/시간 조절은 영상 하단의 통합 컨트롤로만 제어됩니다
  - 중복된 컨트롤이 없어 혼란 없이 원하는 구간을 정확하게 찾을 수 있습니다
- **🎯 정확한 캡처**: 슬라이더 위치에 따라 정확한 프레임이 캡처됩니다

## 🛠 기술 스택

- **HTML5**: 시맨틱 마크업과 Canvas API
- **CSS3**: CSS Variables, Flexbox, 반응형 디자인
- **Vanilla JavaScript**: ES6+ 최적화된 함수형 구조 (IIFE 패턴)
- **Canvas API**: 동영상 프레임 렌더링 및 이미지 생성
- **File API**: 로컬 파일 처리
- **Video API**: 동영상 메타데이터 및 프레임 제어
- **LocalStorage**: 클라이언트 사이드 프리미엄 상태 저장
- **Promise/Async-Await**: 비동기 처리 최적화

### Freemium 시스템
- **PremiumManager**: 프리미엄 상태 관리 클래스 (일일 사용 횟수, 모드 잠금)
- **PremiumUI**: UI 컨트롤러 (업그레이드 모달, 잠금 버튼, 사용량 표시)
- **워터마크**: Canvas 2D API로 무료 사용자 이미지에 텍스트 추가
- **해상도 제한**: 무료 720p / 프리미엄 Full HD 분기 처리

## 📁 프로젝트 구조

```
├── index.html              # 메인 HTML 파일 (3모드 UI + Freemium)
├── auth_check.php          # Gnuboard 인증 및 프리미엄 기능
├── premium_functions.php   # 구독 시스템 핵심 함수
├── premium_plans.php       # 프리미엄 플랜 선택 페이지
├── payment_process.php     # Toss Payments 결제 처리
├── track_usage.php         # 사용량 추적 API
├── css/
│   ├── style.css          # 메인 스타일시트 (3모드 UI 스타일)
│   └── premium.css        # Freemium UI 스타일 (모달, 배지, 잠금 버튼)
├── js/
│   ├── main.js           # 3모드 캡처 JavaScript 로직 (16KB, Freemium 통합)
│   ├── premium-manager.js # 프리미엄 상태 관리 클래스 (LocalStorage 기반)
│   └── ui-premium.js     # 프리미엄 UI 컨트롤러 (모달, 사용량 표시)
├── sql/                   # 데이터베이스 스키마
│   ├── 01_member_extension.sql
│   ├── 02_subscription_tables.sql
│   └── 03_add_capture_mode.sql
├── privacy-policy.html     # 개인정보 처리방침 (한국어, Google Play)
├── privacy-policy-en.html  # Privacy Policy (English, Apple App Store)
├── terms-of-service.html   # 이용약관 (한국어)
├── FREEMIUM_IMPLEMENTATION.md  # Freemium 구현 가이드
├── APP_RELEASE_GUIDE.md        # 앱 출시 가이드
└── README.md             # 프로젝트 문서
```

## 🎯 핵심 기능 상세

### 🚀 최적화된 JavaScript 구조 (3모드 지원)
IIFE(즉시 실행 함수 표현식) 패턴을 사용한 효율적인 구현:

- **3가지 캡처 모드 지원**: 시작/마지막/원하는 구간 프레임 캡처
- **시간 슬라이더 실시간 동기화**: 드래그하면 비디오가 즉시 해당 시점으로 이동하며 부드러운 탐색 제공
- **미리보기 재생**: 원하는 구간 모드에서 비디오 미리보기 기능
- **모드별 UI 전환**: 선택한 모드에 따른 동적 인터페이스 변경
- **파일 처리**: 동영상 파일 검증 및 비동기 로드
- **실시간 비디오-슬라이더 동기화**: 100ms 디바운싱과 Promise 기반의 부드럽고 정확한 시점 탐색
- **캔버스 렌더링**: 고품질 동영상 프레임을 캔버스에 그리기
- **이미지 생성**: 최적화된 PNG Blob 생성 (95% 품질)
- **메모리 관리**: 자동 URL 정리 및 리소스 해제
- **에러 처리**: 강화된 타임아웃 및 예외 처리 (8초 제한)

### 📊 캡처 이미지 해상도

**3가지 해상도 옵션으로 다양한 용도에 맞게 선택 가능합니다.**

#### 🎯 해상도 옵션

**1. 원본 유지 (Original)** - 무료 버전 포함
- 원본 크기 그대로 출력 (업스케일링 없음)
- HD 동영상 (1280×720) → 1280×720 (원본 유지)
- 4K 동영상 (3840×2160) → 1920×1080 (다운스케일링)
- **특징**: 품질 최우선, 작은 해상도는 그대로 유지

**2. Full HD (1080p)** - 프리미엄 전용 👑
- 항상 Full HD (1920×1080)로 출력 (업스케일링 포함)
- HD 동영상 (1280×720) → 1920×1080 (업스케일링 ⬆️)
- 4K 동영상 (3840×2160) → 1920×1080 (다운스케일링 ⬇️)
- **특징**: 일관된 고화질 출력, 모든 이미지를 Full HD로 통일
- ⚠️ 저해상도 영상을 Full HD로 업스케일링 가능

**3. 원본 최대 (4K+)** - 프리미엄 전용 👑
- 원본 해상도 그대로 출력 (업스케일링 없음, 다운스케일링도 없음)
- 4K 동영상 (3840×2160) → 3840×2160 (원본 유지 🔥)
- 8K 동영상 (7680×4320) → 7680×4320 (원본 유지 🔥)
- HD 동영상 (1280×720) → 1280×720 (원본 유지, 업스케일링 안 함)
- **특징**: 최고 품질 보존, 원본 기준 출력
- ⚠️ HD 영상을 4K로 업스케일링하지 않음 (원본 그대로만 출력)

#### ✨ 해상도별 비교

| 원본 영상 | 원본 유지 | Full HD | 원본 최대 |
|----------|----------|---------|----------|
| 720p (1280×720) | 1280×720 | 1920×1080 ⬆️ | 1280×720 |
| Full HD (1920×1080) | 1920×1080 | 1920×1080 | 1920×1080 |
| 4K (3840×2160) | 1920×1080 ⬇️ | 1920×1080 ⬇️ | 3840×2160 |
| 8K (7680×4320) | 1920×1080 ⬇️ | 1920×1080 ⬇️ | 7680×4320 |

#### 📐 해상도 처리 방식 (예시)

**원본 유지 모드:**
- **4K 시네마 (4096×2160)** → **1920×1013** (다운스케일링, 비율 유지)
- **Full HD (1920×1080)** → **1920×1080** (원본 크기)
- **HD 동영상 (1280×720)** → **1280×720** (원본 유지, 업스케일링 안 함)
- **세로 동영상 (720×1280)** → **720×1280** (원본 유지)
- **초광각 (2560×1080)** → **1920×810** (다운스케일링, 21:9 비율 유지)

**Full HD 모드:**
- **HD 동영상 (1280×720)** → **1920×1080** (업스케일링)
- **4K 동영상 (3840×2160)** → **1920×1080** (다운스케일링)
- 모든 영상을 Full HD로 통일

**원본 최대 모드:**
- **4K 동영상 (3840×2160)** → **3840×2160** (원본 그대로)
- **8K 동영상 (7680×4320)** → **7680×4320** (원본 그대로)
- 최고 품질 보존

#### 🎨 주요 특징

1. **원본 비율 완벽 유지**: 모든 모드에서 영상 비율을 절대 왜곡하지 않음
2. **유연한 선택**: 용도에 따라 3가지 옵션 중 선택 가능
3. **무료 사용자**: 720p 제한 (무료 버전)
4. **프리미엄 사용자**: Full HD (1080p) 또는 원본 최대 (4K+) 선택 가능
5. **다양한 비율 지원**: 16:9, 21:9, 4:3, 1:1, 세로형 등 모든 비율 지원
6. **실시간 정보**: "원본: 3840×2160 → 출력: 3840×2160 (Ultra)" 형태로 표시

### 지원 형식
브라우저에서 지원하는 모든 동영상 코덱:
- H.264 (MP4)
- VP8/VP9 (WebM)
- AV1 (일부 최신 브라우저)

## ⚠️ 주의사항

### 코덱 호환성
- 일부 모바일 기기에서는 HEVC/H.265 형식을 지원하지 않을 수 있습니다.
- 지원되지 않는 형식의 경우 적절한 에러 메시지가 표시됩니다.
- 호환성 문제 해결을 위해 H.264 형식 사용을 권장합니다.

### 🎬 Sora/AI 생성 동영상 최적화
- **Sora 비디오 특별 지원**: OpenAI Sora에서 생성된 동영상을 위한 최적화된 처리
- **고품질 비디오 처리**: 대용량 AI 생성 비디오의 안정적인 프레임 캡처
- **다중 시도 렌더링**: 특수 인코딩된 비디오를 위한 강화된 캡처 알고리즘
- **자동 감지**: Sora 또는 고품질 비디오 자동 인식 및 최적 처리

### 브라우저 요구사항
- 모던 브라우저 (Chrome 60+, Firefox 60+, Safari 12+, Edge 79+)
- Canvas API 및 File API 지원 필수

## 🔮 향후 개발 계획

### 추가 예정 기능
- 🔄 **다중 프레임 캡처**: 영상의 여러 지점에서 동시 프레임 추출 (프리미엄)
- 🔄 **키프레임 자동 감지**: 장면 전환 지점 자동 인식 캡처 (프리미엄)
- 🔄 **썸네일 그리드**: 여러 프레임을 한 번에 미리보기
- 🔄 **이미지 형식 선택**: JPEG, WebP 등 다양한 출력 형식
- 🔄 **배치 처리**: 여러 동영상 파일 동시 처리 (프리미엄)
- 🔄 **프레임 편집**: 기본적인 이미지 편집 기능 (크롭, 필터)
- 🔄 **ffmpeg.wasm 통합**: 클라이언트 사이드 동영상 변환
- 🔄 **시간 북마크**: 자주 사용하는 시점을 저장하고 빠른 선택

### 개선 예정 사항
- 🔄 **성능 최적화**: 대용량 동영상 처리 개선
- 🔄 **UI/UX 개선**: 드래그 앤 드롭, 진행률 표시기
- 🔄 **접근성 향상**: 키보드 네비게이션, 스크린 리더 지원

### Freemium 시스템 개선
- 🔄 **실제 인앱 결제 (IAP) 통합**: Google Play Billing, Apple StoreKit 연동
- 🔄 **영수증 검증**: 서버 사이드 결제 검증 시스템
- 🔄 **프로모션 코드**: 할인 및 무료 체험 쿠폰
- 🔄 **추천 프로그램**: 친구 초대로 프리미엄 무료 사용
- 🔄 **사용 통계**: 월간 캡처 통계, 절약한 시간 표시

## 🌐 배포 정보

### GitHub Pages 배포
이 프로젝트는 GitHub Pages로 쉽게 배포할 수 있습니다:

1. **GitHub 저장소 생성**
   ```bash
   git init
   git add .
   git commit -m "Initial commit: Last Pic v1.2"
   git branch -M main
   git remote add origin https://github.com/yourusername/last-pic.git
   git push -u origin main
   ```

2. **GitHub Pages 활성화**
   - GitHub 저장소 → Settings → Pages
   - Source: Deploy from a branch
   - Branch: `main` / `/ (root)`
   - Save

3. **접속 URL**
   - `https://yourusername.github.io/last-pic/`
   - 또는 커스텀 도메인 설정 가능

### 프로덕션 URL
- **GitHub Pages**: `https://yourusername.github.io/last-pic/`
- **커스텀 도메인**: `lastpic.app` (권장)

### API 엔드포인트
현재 버전은 **완전한 클라이언트 사이드 앱**으로 별도 API 서버가 필요하지 않습니다:
- ✅ 모든 처리는 브라우저에서 실행
- ✅ 서버 업로드 없음
- ✅ 데이터베이스 불필요 (LocalStorage 사용)
- ✅ GitHub Pages로 무료 호스팅 가능

## 📊 데이터 모델

### 처리 데이터
- **입력**: 동영상 파일 (File API)
- **출력**: PNG 이미지 (Blob)
- **메타데이터**: 동영상 길이, 해상도, 코덱 정보

### 저장소
- 모든 처리는 메모리에서 실행
- 파일은 로컬 디바이스에만 저장
- 서버 전송 없음 (완전한 클라이언트 사이드)

---

**Made with ❤️ by AI 5678 Video Frame Capture Team**
*All processing runs securely in your browser*